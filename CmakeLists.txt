cmake_minimum_required(VERSION 3.10)
project(main)
include_directories( ${CMAKE_SOURCE_DIR}/include)
add_library(stb_image ${CMAKE_SOURCE_DIR}/stb_image/stb_image.cpp)
include_directories( ${CMAKE_SOURCE_DIR}/)
add_executable(main ${CMAKE_SOURCE_DIR}/src/main.cpp ${CMAKE_SOURCE_DIR}/src/Shader.cpp ${CMAKE_SOURCE_DIR}/src/indexbuffer.cpp ${CMAKE_SOURCE_DIR}/src/vertexbuffer.cpp ${CMAKE_SOURCE_DIR}/src/vertexarray.cpp ${CMAKE_SOURCE_DIR}/src/renderer.cpp ${CMAKE_SOURCE_DIR}/src/Texture.cpp)





set_target_properties(main PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY "${CMAKE_SOURCE_DIR}/release"
)


target_compile_definitions(main PRIVATE GLEW_STATIC)

target_link_libraries(main
    "${CMAKE_SOURCE_DIR}/libs/libglew32d.a"
    "${CMAKE_SOURCE_DIR}/libs/libglfw3.a"
    opengl32
    stb_image
)
add_custom_command(TARGET main POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_directory
    "${CMAKE_SOURCE_DIR}/shaders"
    "${CMAKE_SOURCE_DIR}/release/shaders"
    COMMENT "Copying shaders"
)


set(ASSET_SOURCE_DIR "${CMAKE_SOURCE_DIR}/assets") 


set(ASSET_DEST_DIR "${CMAKE_SOURCE_DIR}/release/asset")

add_custom_command(TARGET main POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_directory
    "${ASSET_SOURCE_DIR}"
    "${ASSET_DEST_DIR}"
    COMMENT "Copying assets to release directory"
)